<!DOCTYPE html>
<html lang="en"><head><title>HashCompetition</title></head><body>
    <script type="importmap">{"imports":{"lodash":"https://unpkg.com/@esm-bundle/lodash@4.17.21/esm/index.js","rxjs":"https://unpkg.com/@esm-bundle/rxjs@7.5.4/esm/es2015/rxjs.min.js","preact":"https://unpkg.com/preact@10.6.6/dist/preact.mjs","preact/hooks":"https://unpkg.com/preact@10.6.6/hooks/dist/hooks.mjs","@emotion/css":"https://unpkg.com/@esm-bundle/emotion@10.0.27/esm/emotion.min.js","ethers":"https://unpkg.com/ethers@5.5.4/dist/ethers.esm.min.js"}}</script>
    <script src="https://unpkg.com/es-module-shims@0.12.8/dist/es-module-shims.min.js"></script>
    <link rel="modulepreload" href="https://unpkg.com/@esm-bundle/lodash@4.17.21/esm/index.js"/>
<link rel="modulepreload" href="https://unpkg.com/@esm-bundle/rxjs@7.5.4/esm/es2015/rxjs.min.js"/>
<link rel="modulepreload" href="https://unpkg.com/preact@10.6.6/dist/preact.mjs"/>
<link rel="modulepreload" href="https://unpkg.com/preact@10.6.6/hooks/dist/hooks.mjs"/>
<link rel="modulepreload" href="https://unpkg.com/@esm-bundle/emotion@10.0.27/esm/emotion.min.js"/>
<link rel="modulepreload" href="https://unpkg.com/ethers@5.5.4/dist/ethers.esm.min.js"/>
    <script type="module">import{options as n,Fragment as e,Component as t,render as o}from"preact";import r from"lodash";import{useState as i,useEffect as a,useMemo as s}from"preact/hooks";import{ethers as c}from"ethers";import*as u from"rxjs";import{css as l,cx as d,keyframes as p}from"@emotion/css";!function(){const n={};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,n)}catch(n){}globalThis.process={env:n}}();var f=function(){return f=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},f.apply(this,arguments)};function h(n,e,t,o){return new(t||(t=Promise))((function(r,i){function a(n){try{c(o.next(n))}catch(n){i(n)}}function s(n){try{c(o.throw(n))}catch(n){i(n)}}function c(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,s)}c((o=o.apply(n,e||[])).next())}))}function v(n,e){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function y(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var b=0;function m(e,t,o,r,i){var a,s,c={};for(s in t)"ref"==s?a=t[s]:c[s]=t[s];var u={type:e,props:c,key:o,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--b,__source:r,__self:i};if("function"==typeof e&&(a=e.defaultProps))for(s in a)void 0===c[s]&&(c[s]=a[s]);return n.vnode&&n.vnode(u),u}"undefined"!=typeof window&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.6.6",n,{Fragment:e,Component:t});var g={};function _(n){return n.type===e?"Fragment":"function"==typeof n.type?n.type.displayName||n.type.name:"string"==typeof n.type?n.type:"#text"}var w=[],k=[];function x(){return w.length>0?w[w.length-1]:null}var S=!1;function T(n){return"function"==typeof n.type&&n.type!=e}function O(n){for(var e=[n],t=n;null!=t.__o;)e.push(t.__o),t=t.__o;return e.reduce((function(n,e){n+="  in "+_(e);var t=e.__source;return t?n+=" (at "+t.fileName+":"+t.lineNumber+")":S||(S=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+"\n"}),"")}var E="function"==typeof WeakMap,j=t.prototype.setState;t.prototype.setState=function(n,e){return null==this.__v?null==this.state&&console.warn('Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.\n\n'+O(x())):null==this.__P&&console.warn('Can\'t call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+O(this.__v)),j.call(this,n,e)};var N=t.prototype.forceUpdate;function C(n){var e=n.props,t=_(n),o="";for(var r in e)if(e.hasOwnProperty(r)&&"children"!==r){var i=e[r];"function"==typeof i&&(i="function "+(i.displayName||i.name)+"() {}"),i=Object(i)!==i||i.toString?i+"":Object.prototype.toString.call(i),o+=" "+r+"="+JSON.stringify(i)}var a=e.children;return"<"+t+o+(a&&a.length?">..</"+t+">":" />")}t.prototype.forceUpdate=function(n){return null==this.__v?console.warn('Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.\n\n'+O(x())):null==this.__P&&console.warn('Can\'t call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+O(this.__v)),N.call(this,n)},function(){!function(){var e=n.__b,t=n.diffed,o=n.__,r=n.vnode,i=n.__r;n.diffed=function(n){T(n)&&k.pop(),w.pop(),t&&t(n)},n.__b=function(n){T(n)&&w.push(n),e&&e(n)},n.__=function(n,e){k=[],o&&o(n,e)},n.vnode=function(n){n.__o=k.length>0?k[k.length-1]:null,r&&r(n)},n.__r=function(n){T(n)&&k.push(n),i&&i(n)}}();var e=!1,t=n.__b,o=n.diffed,r=n.vnode,i=n.__e,a=n.__,s=n.__h,c=E?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,u=[];n.__e=function(n,e,t){if(e&&e.__c&&"function"==typeof n.then){var o=n;n=new Error("Missing Suspense. The throwing component was: "+_(e));for(var r=e;r;r=r.__)if(r.__c&&r.__c.__c){n=o;break}if(n instanceof Error)throw n}try{i(n,e,t),"function"!=typeof n.then&&setTimeout((function(){throw n}))}catch(n){throw n}},n.__=function(n,e){if(!e)throw new Error("Undefined parent passed to render(), this is the second argument.\nCheck if the element is available in the DOM/has the correct id.");var t;switch(e.nodeType){case 1:case 11:case 9:t=!0;break;default:t=!1}if(!t){var o=_(n);throw new Error("Expected a valid HTML node as a second argument to render.\tReceived "+e+" instead: render(<"+o+" />, "+e+");")}a&&a(n,e)},n.__b=function(n){var o=n.type,r=function n(e){return e?"function"==typeof e.type?n(e.__):e:{}}(n.__);if(e=!0,void 0===o)throw new Error("Undefined component passed to createElement()\n\nYou likely forgot to export your component or might have mixed up default and named imports"+C(n)+"\n\n"+O(n));if(null!=o&&"object"==typeof o){if(void 0!==o.__k&&void 0!==o.__e)throw new Error("Invalid type passed to createElement(): "+o+"\n\nDid you accidentally pass a JSX literal as JSX twice?\n\n  let My"+_(n)+" = "+C(o)+";\n  let vnode = <My"+_(n)+" />;\n\nThis usually happens when you export a JSX literal and not the component.\n\n"+O(n));throw new Error("Invalid type passed to createElement(): "+(Array.isArray(o)?"array":o))}if("thead"!==o&&"tfoot"!==o&&"tbody"!==o||"table"===r.type?"tr"===o&&"thead"!==r.type&&"tfoot"!==r.type&&"tbody"!==r.type&&"table"!==r.type?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+C(n)+"\n\n"+O(n)):"td"===o&&"tr"!==r.type?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+C(n)+"\n\n"+O(n)):"th"===o&&"tr"!==r.type&&console.error("Improper nesting of table. Your <th> should have a <tr>."+C(n)+"\n\n"+O(n)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+C(n)+"\n\n"+O(n)),void 0!==n.ref&&"function"!=typeof n.ref&&"object"!=typeof n.ref&&!("$$typeof"in n))throw new Error('Component\'s "ref" property should be a function, or an object created by createRef(), but got ['+typeof n.ref+"] instead\n"+C(n)+"\n\n"+O(n));if("string"==typeof n.type)for(var i in n.props)if("o"===i[0]&&"n"===i[1]&&"function"!=typeof n.props[i]&&null!=n.props[i])throw new Error("Component's \""+i+'" property should be a function, but got ['+typeof n.props[i]+"] instead\n"+C(n)+"\n\n"+O(n));if("function"==typeof n.type&&n.type.propTypes){if("Lazy"===n.type.displayName&&c&&!c.lazyPropTypes.has(n.type)){var a="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var s=n.type();c.lazyPropTypes.set(n.type,!0),console.warn(a+"Component wrapped in lazy() is "+_(s))}catch(n){console.warn(a+"We will log the wrapped component's name once it is loaded.")}}var u=n.props;n.type.__f&&delete(u=function(n,e){for(var t in e)n[t]=e[t];return n}({},u)).ref,function(n,e,t,o,r){Object.keys(n).forEach((function(t){var i;try{i=n[t](e,t,o,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(n){i=n}!i||i.message in g||(g[i.message]=!0,console.error("Failed prop type: "+i.message+(r&&"\n"+r()||"")))}))}(n.type.propTypes,u,0,_(n),(function(){return O(n)}))}t&&t(n)},n.__h=function(n,t,o){if(!n||!e)throw new Error("Hook can only be invoked from render methods.");s&&s(n,t,o)};var l=function(n,e){return{get:function(){var t="get"+n+e;u&&u.indexOf(t)<0&&(u.push(t),console.warn("getting vnode."+n+" is deprecated, "+e))},set:function(){var t="set"+n+e;u&&u.indexOf(t)<0&&(u.push(t),console.warn("setting vnode."+n+" is not allowed, "+e))}}},d={nodeName:l("nodeName","use vnode.type"),attributes:l("attributes","use vnode.props"),children:l("children","use vnode.props.children")},p=Object.create({},d);n.vnode=function(n){var e=n.props;if(null!==n.type&&null!=e&&("__source"in e||"__self"in e)){var t=n.props={};for(var o in e){var i=e[o];"__source"===o?n.__source=i:"__self"===o?n.__self=i:t[o]=i}}n.__proto__=p,r&&r(n)},n.diffed=function(n){if(n.__k&&n.__k.forEach((function(e){if(e&&void 0===e.type){delete e.__,delete e.__b;var t=Object.keys(e).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+t+"}.\n\n"+O(n))}})),e=!1,o&&o(n),null!=n.__k)for(var t=[],r=0;r<n.__k.length;r++){var i=n.__k[r];if(i&&null!=i.key){var a=i.key;if(-1!==t.indexOf(a)){console.error('Following component has two or more children with the same key attribute: "'+a+'". This may cause glitches and misbehavior in rendering process. Component: \n\n'+C(n)+"\n\n"+O(n));break}t.push(a)}}}}();var $,A,M,P=($=function(n,e){function t(n){return"object"!=typeof n||"toString"in n?n:Object.prototype.toString.call(n).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var o="object"==typeof process&&"production"===process.env.NODE_ENV;function r(n,e){if(!n){if(o)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=r;var i=Object.prototype.hasOwnProperty,a=Array.prototype.splice,s=Object.prototype.toString;function c(n){return s.call(n).slice(8,-1)}var u=Object.assign||function(n,e){return l(e).forEach((function(t){i.call(e,t)&&(n[t]=e[t])})),n},l="function"==typeof Object.getOwnPropertySymbols?function(n){return Object.keys(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.keys(n)};function d(n){return Array.isArray(n)?u(n.constructor(n.length),n):"Map"===c(n)?new Map(n):"Set"===c(n)?new Set(n):n&&"object"==typeof n?u(Object.create(Object.getPrototypeOf(n)),n):n}var p=function(){function n(){this.commands=u({},f),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(n,e){return n===e},this.update.newContext=function(){return(new n).update}}return Object.defineProperty(n.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(n){this.update.isEquals=n},enumerable:!0,configurable:!0}),n.prototype.extend=function(n,e){this.commands[n]=e},n.prototype.update=function(n,e){var t=this,o="function"==typeof e?{$apply:e}:e;Array.isArray(n)&&Array.isArray(o)||r(!Array.isArray(o),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),r("object"==typeof o&&null!==o,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(t.commands).join(", ")+"."}));var a=n;return l(o).forEach((function(e){if(i.call(t.commands,e)){var r=n===a;a=t.commands[e](o[e],a,o,n),r&&t.isEquals(a,n)&&(a=n)}else{var s="Map"===c(n)?t.update(n.get(e),o[e]):t.update(n[e],o[e]),u="Map"===c(a)?a.get(e):a[e];t.isEquals(s,u)&&(void 0!==s||i.call(n,e))||(a===n&&(a=d(n)),"Map"===c(a)?a.set(e,s):a[e]=s)}})),a},n}();e.Context=p;var f={$push:function(n,e,t){return v(e,t,"$push"),n.length?e.concat(n):e},$unshift:function(n,e,t){return v(e,t,"$unshift"),n.length?n.concat(e):e},$splice:function(n,e,o,i){return function(n,e){r(Array.isArray(n),(function(){return"Expected $splice target to be an array; got "+t(n)})),b(e.$splice)}(e,o),n.forEach((function(n){b(n),e===i&&n.length&&(e=d(i)),a.apply(e,n)})),e},$set:function(n,e,t){return function(n){r(1===Object.keys(n).length,(function(){return"Cannot have more than one key in an object with $set"}))}(t),n},$toggle:function(n,e){y(n,"$toggle");var t=n.length?d(e):e;return n.forEach((function(n){t[n]=!e[n]})),t},$unset:function(n,e,t,o){return y(n,"$unset"),n.forEach((function(n){Object.hasOwnProperty.call(e,n)&&(e===o&&(e=d(o)),delete e[n])})),e},$add:function(n,e,t,o){return m(e,"$add"),y(n,"$add"),"Map"===c(e)?n.forEach((function(n){var t=n[0],r=n[1];e===o&&e.get(t)!==r&&(e=d(o)),e.set(t,r)})):n.forEach((function(n){e!==o||e.has(n)||(e=d(o)),e.add(n)})),e},$remove:function(n,e,t,o){return m(e,"$remove"),y(n,"$remove"),n.forEach((function(n){e===o&&e.has(n)&&(e=d(o)),e.delete(n)})),e},$merge:function(n,e,o,i){var a,s;return a=e,r((s=n)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+t(s)})),r(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+t(a)})),l(n).forEach((function(t){n[t]!==e[t]&&(e===i&&(e=d(i)),e[t]=n[t])})),e},$apply:function(n,e){var o;return r("function"==typeof(o=n),(function(){return"update(): expected spec of $apply to be a function; got "+t(o)+"."})),n(e)}},h=new p;function v(n,e,o){r(Array.isArray(n),(function(){return"update(): expected target of "+t(o)+" to be an array; got "+t(n)+"."})),y(e[o],o)}function y(n,e){r(Array.isArray(n),(function(){return"update(): expected spec of "+t(e)+" to be an array; got "+t(n)+". Did you forget to wrap your parameter in an array?"}))}function b(n){r(Array.isArray(n),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(n)+". Did you forget to wrap your parameters in an array?"}))}function m(n,e){var o=c(n);r("Map"===o||"Set"===o,(function(){return"update(): "+t(e)+" expects a target of type Set or Map; got "+t(o)}))}e.isEquals=h.update.isEquals,e.extend=h.extend,e.default=h.update,e.default.default=n.exports=u(e.default,e)},$(A={exports:{}},A.exports),A.exports),R=(M=P)&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M;function D(n,e){var t=i(),o=t[0],r=t[1];return a((function(){var e=("subscribe"in n?n:n()).subscribe(r);return function(){return e.unsubscribe()}}),e),o}function I(n,e){var t=this,o=i(),r=o[0],s=o[1];return a((function(){var e=!1;return h(t,void 0,void 0,(function(){var t;return v(this,(function(o){switch(o.label){case 0:return[4,n()];case 1:return t=o.sent(),e||s(t),[2]}}))})),function(){return e=!0}}),e),r}P.invariant,P.Context,P.isEquals,P.extend;var U=c.BigNumber,B=c.utils,L=B.keccak256,q=B.arrayify,z=B.hexlify,H=function(n,e){return r.zip(q(n),q(e)).map((function(n){return n[0]^n[1]}))},F=function(n,e,t){return U.from((o=H(L(t),H(e,L(n))),q(o).map((function(n){return~n}))));var o},J=function(n,e){void 0===e&&(e=4);var t=z(n);return t.length<=2+e+1+e?t:"".concat(t.substring(0,2+e),"…").concat(t.substring(t.length-e))},Y=c.utils.randomBytes,W=function(){function n(){this.generateSolution=function(n,e){var t=Y(32);return{task:e,solution:t,score:F(n,e,t)}},this.solution$=new u.Subject,setInterval(this.iterate.bind(this),50)}return n.prototype.setTask=function(n,e){this.address=n,this.task=e},n.prototype.iterate=function(){if(this.address&&this.task){for(var n=this.generateSolution(this.address,this.task),e=0;e<20;e++){var t=this.generateSolution(this.address,this.task);n.score.lt(t.score)&&(n=t)}this.solution$.next(n)}},n}(),K=[{inputs:[],name:"BET_SIZE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"BLOCKS_TO_CREATE_TASK",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"activeTasks",outputs:[{internalType:"uint256",name:"bank",type:"uint256"},{internalType:"uint256",name:"score",type:"uint256"},{internalType:"address",name:"sender",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"task",type:"bytes32"}],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"task",type:"bytes32"},{internalType:"bytes32",name:"solutionClaim",type:"bytes32"}],name:"claimSoluton",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"h",type:"bytes32"},{internalType:"uint256",name:"searchDepth",type:"uint256"}],name:"findBlockByHash",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"task",type:"bytes32"}],name:"isTaskOngoing",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"task",type:"bytes32"},{internalType:"bytes32",name:"solution",type:"bytes32"}],name:"scoreSolution",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"task",type:"bytes32"},{internalType:"bytes32",name:"solution",type:"bytes32"}],name:"submitSolution",outputs:[],stateMutability:"nonpayable",type:"function"}],V=new c.providers.JsonRpcProvider,X=u.fromEvent(V,"block").pipe(u.shareReplay(1));var G,Z=["...","·..","˙·.","·˙·",".·˙","..·"],Q=function(n){var t=n.interval,o=void 0===t?100:t;return m(e,{children:D((function(){return function(n){return void 0===n&&(n=100),u.interval(n).pipe(u.map((function(n){return Z[n%Z.length]})))}(o)}),[o])},void 0)},nn=l(G||(G=y(["\n    & {\n        text-decoration: underline dashed;\n    }\n    &:hover {\n        background-color: rgba(255, 221, 0, 0.068);\n    }\n    & .copied {\n        position: relative;\n    }\n    & .copied>* {\n        position: absolute;\n        bottom: -1.3em;\n        left: 0.1em;\n        border: 1px solid;\n        background-color: rgb(255, 252, 233);\n    }\n"],["\n    & {\n        text-decoration: underline dashed;\n    }\n    &:hover {\n        background-color: rgba(255, 221, 0, 0.068);\n    }\n    & .copied {\n        position: relative;\n    }\n    & .copied>* {\n        position: absolute;\n        bottom: -1.3em;\n        left: 0.1em;\n        border: 1px solid;\n        background-color: rgb(255, 252, 233);\n    }\n"])));function en(n){var e=this,t=n.data,o=n.className,r=n.onMouseDown,a=n.onDblClick,s=n.children,c=function(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]])}return t}(n,["data","className","onMouseDown","onDblClick","children"]),u=i(!1),l=u[0],p=u[1];return m("span",f({},c,{className:d("CopySpan",nn,o),onMouseDown:function(n){return null==r||r.call(this,n),n.detail>1&&n.preventDefault()},onDblClick:function(n){return null==a||a.call(this,n),h(e,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return[4,navigator.clipboard.writeText(t)];case 1:return n.sent(),p(!0),setTimeout((function(){return p(!1)}),400),[2]}}))}))},title:"DblClick to copy: "+t},{children:[l&&m("span",f({className:"copied"},{children:m("div",{children:"Copied!"},void 0)}),void 0),s]}),void 0)}var tn,on,rn,an,sn,cn,un=[p(tn||(tn=y(["0% { background: #f6e7fc; } 100% { background: initial; } #"],["0% { background: #f6e7fc; } 100% { background: initial; } #"]))),p(on||(on=y(["0% { background: #f6e7fc; } 100% { background: initial; } ##"],["0% { background: #f6e7fc; } 100% { background: initial; } ##"])))],ln=[l(rn||(rn=y(["& { animation: "," 1s; }"],["& { animation: "," 1s; }"])),un[0]),l(an||(an=y(["& { animation: "," 1s; }"],["& { animation: "," 1s; }"])),un[1])],dn=function(n){return ln[+function(n){var e=i(!1),t=e[0],o=e[1];return a((function(){return o((function(n){return!n}))}),n),[t,o]}(n)[0]]},pn=c.utils.hexlify,fn=l(sn||(sn=y(["\n    & .hex-prefix { \n        color: rgb(184, 184, 184)\n    }\n"],["\n    & .hex-prefix { \n        color: rgb(184, 184, 184)\n    }\n"]))),hn=function(n){var e=n.bytes,t=n.transform,o=n.className;return m("span",f({className:d(o,"Hex",fn,dn([pn(e)]))},{children:m(en,f({data:pn(e)},{children:[m("span",f({className:"hex-prefix"},{children:"0x"}),void 0),(null!=t?t:pn)(e).substring(2)]}),void 0)}),void 0)},vn=l(cn||(cn=y(["\n    & .hex-prefix { \n        color: rgb(184, 184, 184)\n    }\n\n    &.colored .score-fs {\n        background-color: rgba(0, 157, 255, 0.100)\n    }\n\n    &.colored .score-first-non-fs {\n        background-color: rgba(0, 255, 174, 0.100)\n    }\n"],["\n    & .hex-prefix { \n        color: rgb(184, 184, 184)\n    }\n\n    &.colored .score-fs {\n        background-color: rgba(0, 157, 255, 0.100)\n    }\n\n    &.colored .score-first-non-fs {\n        background-color: rgba(0, 255, 174, 0.100)\n    }\n"])));function yn(n){var t=n.score,o=n.full,r=void 0!==o&&o,i=n.colored,a=void 0!==i&&i,s="0x"+t.toHexString().substring(2).padStart(64,"0"),c=s.match(/0x(f*)(..)(.*)/),u=c[1],l=c[2],p=c[3],h=u.length.toString(16).padStart(2,"0");return m("span",f({className:d("Score",vn,{colored:a},dn([s]))},{children:m(en,f({data:s},{children:[m("span",f({className:"hex-prefix"},{children:"0x"}),void 0),m(e,r?{children:[m("span",f({className:d("score-fs")},{children:u}),void 0),m("span",f({className:d("score-first-non-fs")},{children:l}),void 0),p]}:{children:["[",m("span",f({className:d("score-fs")},{children:h}),void 0),"]",m("span",f({className:d("score-first-non-fs")},{children:l}),void 0),"…"]},void 0)]}),void 0)}),void 0)}var bn,mn,gn,_n,wn,kn=function(n){return void 0!==n},xn=l(bn||(bn=y(["& { background-color: rgba(38, 255, 0, 0.068); }"],["& { background-color: rgba(38, 255, 0, 0.068); }"]))),Sn=l(mn||(mn=y(["& { background-color: rgba(255, 221, 0, 0.068); }"],["& { background-color: rgba(255, 221, 0, 0.068); }"]))),Tn=l(gn||(gn=y(["& { background-color: rgba(255, 0, 0, 0.068); }"],["& { background-color: rgba(255, 0, 0, 0.068); }"]))),On=l(_n||(_n=y(['\n    & {\n        text-decoration: underline dashed;\n    }\n    &::after {\n        content: "[?]";\n    }\n    &:hover {\n        background-color: rgba(255, 221, 0, 0.068);\n    }\n'],['\n    & {\n        text-decoration: underline dashed;\n    }\n    &::after {\n        content: "[?]";\n    }\n    &:hover {\n        background-color: rgba(255, 221, 0, 0.068);\n    }\n']))),En=l(wn||(wn=y(["\n    & {\n        border: 1px solid;\n        animation: flash0 1s;\n        padding: 0.5em 0.5ch;\n        margin: 1px;\n    }\n    &.selected {\n        background-color: rgb(237, 255, 234);\n    }\n"],["\n    & {\n        border: 1px solid;\n        animation: flash0 1s;\n        padding: 0.5em 0.5ch;\n        margin: 1px;\n    }\n    &.selected {\n        background-color: rgb(237, 255, 234);\n    }\n"])));function jn(n){var e=this,t=n.hashCompetition,o=n.blockNumber,r=n.selectedHash,i=n.onSolve,a=I((function(){return V.getBlock(o)}),[]),s=D((function(){return X}),[]),c=I((function(){return h(e,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return a?[4,t.activeTasks(a.hash)]:[2];case 1:return[2,n.sent().score]}}))}))}),[a,s]),u=a&&r===a.hash,l=m("button",f({disabled:!a||u,onClick:a&&function(){return i(a.hash)}},{children:"Solve"}),void 0),p=a?m(hn,{bytes:a.hash,transform:J},void 0):m(Q,{},void 0),y=kn(s)&&a?(s-a.number).toString().padStart(3,"·"):m(Q,{},void 0);return m("div",f({className:d("Task",En,{selected:u})},{children:[m("div",{children:[l," ",y,": ",p]},void 0),m("div",{children:[m("span",f({className:On,title:"The score of the best solution for the given task submitted so far"},{children:"Public score"}),void 0),": ",kn(c)?m(yn,{score:c},void 0):m(Q,{},void 0)]},void 0)]}),void 0)}var Nn=c.utils,Cn=Nn.hexlify,$n=Nn.keccak256;function An(n){var t=this,o=n.hashCompetition,r=n.backgroundSolver,i=n.contractAddress,a=n.onClaim,s=D((function(){return X}),[]),c=D((function(){return r.solution$.pipe(u.scan((function(n,e){return n.task!==e.task||n.score.lt(e.score)?e:n})),u.distinctUntilChanged(function(n){return function(e,t){return n(e)===n(t)}}(JSON.stringify)))}),[r]),l=D((function(){return r.solution$}),[r]);if(!c||!l)return null;var d=I((function(){return h(t,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return[4,o.activeTasks(l.task)];case 1:return[2,n.sent()]}}))}))}),[s,Cn(l.task)]),p=null==d?void 0:d.score,y=kn(p)&&kn(c)&&c.score.gt(p),b=c.score._hex.match(/0xf*/)[0].length-2;return m("div",{children:[m("h2",{children:"Solver"},void 0),m("div",{children:["Solving task ",m(hn,{bytes:c.task,transform:J},void 0),m(Q,{},void 0)," | Last solution: ",m(hn,{bytes:l.solution,transform:J},void 0),m("br",{},void 0),m("br",{},void 0),"Best solution so far: ",m(hn,{bytes:c.solution,transform:J},void 0),m("br",{},void 0),"Goal:".padStart(10,"·")," ",m(hn,{bytes:H(c.task,$n(i))},void 0),m("br",{},void 0),"Sol hash:".padStart(10,"·")," ",m(hn,{bytes:$n(c.solution)},void 0),m("br",{},void 0),"".padStart(10,"·"),"···","".padStart(b,"⇓"),m("br",{},void 0),"Sol score:".padStart(10,"·")," ",m(yn,{score:c.score,full:!0,colored:!0},void 0),m("br",{},void 0),"Sol score ",m(yn,{score:c.score,colored:!0},void 0)," is ",kn(p)?m(e,{children:[p.lt(c.score)?m(e,{children:[m("span",f({className:"good"},{children:"better"}),void 0)," than"]},void 0):p.eq(c.score)?m(e,{children:[m("span",f({className:"neutral"},{children:"same"}),void 0)," as"]},void 0):m(e,{children:[m("span",f({className:"bad"},{children:"worse"}),void 0)," than"]},void 0)," pub score ",m(yn,{score:p},void 0)]},void 0):m(Q,{},void 0),m("br",{},void 0)," ",m("button",f({disabled:!y,onClick:function(){return a(c.task,c.solution,c.score)}},{children:"Claim"}),void 0)]},void 0)]},void 0)}var Mn=function(n,e){void 0===e&&(e=!1);var t=i([]),o=t[0],r=t[1];return a((function(){var t=!1,o=function(){return h(void 0,void 0,void 0,(function(){var e,i,a,s;return v(this,(function(c){switch(c.label){case 0:if(t)return[2];r([["sent"]]),c.label=1;case 1:return c.trys.push([1,7,,8]),[4,n()];case 2:if(e=c.sent(),t)return[2];r([["pooled",e]]),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,e.wait()];case 4:return i=c.sent(),t?[2]:(r([["confirmed",i,e]]),[3,6]);case 5:return a=c.sent(),console.error(a),t?[2]:(r([["confirmationFailed",a,e],o]),[2]);case 6:return[3,8];case 7:return s=c.sent(),console.error(s),t?[2]:(r([["poolingFailed",s],o]),[2]);case 8:return[2]}}))}))};return e?o():r([void 0,o]),function(){return t=!0}}),[]),o};function Pn(n){var t=n.status,o=function(n){if("object"!=typeof n||null===n)return JSON.stringify(n);if("error"in n)return o(n.error);if("message"in n){var e=n.message;if("string"!=typeof e)return JSON.stringify(e);var t=e.match(/reverted with reason string '(.*)'/);return t?t[1]:e}return JSON.stringify(n)};switch(t[0]){case"sent":return m(e,{children:["sending",m(Q,{},void 0)]},void 0);case"pooled":return m(e,{children:["waiting confirmation",m(Q,{},void 0)," (tx ",m(hn,{bytes:t[1].hash,transform:J},void 0),")"]},void 0);case"poolingFailed":return m(e,{children:["pooling failed: ",m("span",f({className:Tn},{children:o(t[1])}),void 0)]},void 0);case"confirmed":return m(e,{children:["confirmed (tx ",m(hn,{bytes:t[1].transactionHash,transform:J},void 0),")"]},void 0);case"confirmationFailed":return m(e,{children:["confirmation failed, ",o(t[1])]},void 0)}}function Rn(n){var t=n.title,o=n.actionTitle,r=n.status,i=n.onRetry;return m(e,{children:[r&&m(e,{children:[m("span",f({className:dn([r])},{children:[t," ",m(Pn,{status:r},void 0)]}),void 0),m("br",{},void 0)]},void 0),i&&m(e,{children:[m("button",f({onClick:i},{children:(kn(r)?"Retry ":"")+(null!=o?o:t)}),void 0),m("br",{},void 0)]},void 0)]},void 0)}var Dn=c.utils,In=Dn.hexlify,Un=Dn.keccak256,Bn=l(qn||(qn=y(["\n    & button.short {\n        float: right\n    }\n"],["\n    & button.short {\n        float: right\n    }\n"])));function Ln(n){var t=this,o=n.hashCompetition,i=n.task,a=n.solution,s=n.score,c=n.onRemove,u=D((function(){return X}),[]),l=I((function(){return V.getBlock(In(i))}),[i]),p=I((function(){return o.BLOCKS_TO_CREATE_TASK()}),[]),y=kn(p)&&kn(l)&&kn(u)?u-l.number<p.toNumber():void 0,b=m(e,{children:[m("button",f({className:"short",onClick:function(){return confirm("Are you sure you want to remove this solution? This action is not revertible")&&c()}},{children:"x"}),void 0),m("h3",{children:["Solution ",m(hn,{bytes:a,transform:J},void 0)," for  ",m("span",f({className:dn([y])},{children:r.isUndefined(y)?m(Q,{},void 0):m("span",y?f({className:On,title:"soultion claims and submissions are still accpeted\rrewards are not payed out yet"},{children:"ongoing"}):f({className:On,title:"soultion claims and submissions are no more accpeted\rrewards are payed out"},{children:"finished"}),void 0)}),void 0)," task ",m(hn,{bytes:i,transform:J},void 0)]},void 0)]},void 0),g=I((function(){return h(t,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return[4,o.activeTasks(i)];case 1:return[2,n.sent()]}}))}))}),[u,i]),_=null==g?void 0:g.score,w=m(e,{children:["Solution score ",m(yn,{score:s},void 0)," is ",kn(_)?m(e,{children:[m(zn,{n1:s,n2:_},void 0)," public score ",m(yn,{score:_},void 0)]},void 0):m(Q,{},void 0)]},void 0),k=I((function(){return o.BET_SIZE()}),[]),x=function(){if(!k)return m(Q,{},void 0);var n=Mn((function(){return o.claimSoluton(i,Un(a),{value:k})}),!0),t=n[0],r=m(Rn,{title:"Claim",status:t,onRetry:n[1]},void 0);if("confirmed"!==(null==t?void 0:t[0]))return r;var s=Mn((function(){return o.submitSolution(i,a)})),c=s[0],u=m(Rn,{title:"Submission",actionTitle:"Submit",status:c,onRetry:s[1]},void 0);if("confirmed"!==(null==c?void 0:c[0]))return m(e,{children:[r,u]},void 0);var l=Mn((function(){return o.claimReward(i)})),d=m(Rn,{title:"Reward claim",actionTitle:"Claim reward",status:l[0],onRetry:l[1]},void 0);return m(e,{children:[r,u,d]},void 0)}();return m("div",f({className:d("Solution",Bn)},{children:[b,w,m("br",{},void 0),x]}),void 0)}var qn,zn=function(n){var t=n.n1,o=n.n2;return m(e,{children:o.lt(t)?m(e,{children:[m("span",f({className:xn},{children:"better"}),void 0)," than"]},void 0):o.eq(t)?m(e,{children:[m("span",f({className:Sn},{children:"same"}),void 0)," as"]},void 0):m(e,{children:[m("span",f({className:Tn},{children:"worse"}),void 0)," than"]},void 0)},void 0)},Hn=c.utils.hexlify,Fn=new W;function Jn(n){var e=n.contractAddress,t=s((function(){return n=e,t=V.getSigner(),new c.Contract(n,K,t);var n,t}),[e]),o=i(),a=o[0],u=o[1],l=D((function(){return X}),[]),d=i({}),p=d[0],h=d[1],v=I((function(){return t.BLOCKS_TO_CREATE_TASK()}),[]);if(r.isUndefined(v)||r.isUndefined(l))return m("div",{children:["Lodaing",m(Q,{},void 0)]},void 0);var y=function(n){Fn.setTask(e,n),u(n)};return m("div",{children:[m("h1",{children:"HashCompetition frontend"},void 0),r.values(p).length>0&&m("div",{children:[m("h2",{children:"Your solutions"},void 0),r.entries(p).map((function(n){var e=n[0],o=n[1];return m(Ln,f({hashCompetition:t},o,{onRemove:function(){return h((function(n){return R(n,{$unset:[e]})}))}}),e)}))]},void 0),m(An,{hashCompetition:t,contractAddress:e,backgroundSolver:Fn,onClaim:function(n,e,t){return h((function(o){var r;return R(o,((r={})[Hn(n)+Hn(e)]={$set:{task:n,solution:e,score:t}},r))}))}},void 0),m("div",{children:[m("h2",{children:"Ongoing tasks (based on last blocks)"},void 0),"Select a task to solve:",r.range(l,Math.max(0,l-v.toNumber()),-1).map((function(n){return m(jn,{hashCompetition:t,blockNumber:n,selectedHash:a,onSolve:y},n)}))]},void 0)]},void 0)}var Yn,Wn=l(Yn||(Yn=y(['\n    & {\n        width: 750px;\n        margin: auto;\n    }\n    & * {\n        font-family: "Courier";\n        font-size: 1em;\n        line-height: 1.1em;\n    }\n    & h1::before {\n        content: "# ";\n    }\n    & h2::before {\n        content: "## ";\n    }\n    & h3::before {\n        content: "### ";\n    }\n    & h1, h2, h3 {\n        margin: 1em 0em 0em 0em;\n        padding: 0em;\n    }\n    & h3 {\n        font-weight: normal;\n    }\n    & button {\n        padding: 0px;\n        border: none;\n    }\n    & button::before {\n        content: "[\\00a0\\00a0";\n    }\n    & button::after {\n        content: "\\00a0\\00a0]";\n    }\n    & button.short::before {\n        content: "[";\n    }\n    & button.short::after {\n        content: "]";\n    }\n\n    & .todo {\n        color: red;\n    }\n'],['\n    & {\n        width: 750px;\n        margin: auto;\n    }\n    & * {\n        font-family: "Courier";\n        font-size: 1em;\n        line-height: 1.1em;\n    }\n    & h1::before {\n        content: "# ";\n    }\n    & h2::before {\n        content: "## ";\n    }\n    & h3::before {\n        content: "### ";\n    }\n    & h1, h2, h3 {\n        margin: 1em 0em 0em 0em;\n        padding: 0em;\n    }\n    & h3 {\n        font-weight: normal;\n    }\n    & button {\n        padding: 0px;\n        border: none;\n    }\n    & button::before {\n        content: "[\\\\00a0\\\\00a0";\n    }\n    & button::after {\n        content: "\\\\00a0\\\\00a0]";\n    }\n    & button.short::before {\n        content: "[";\n    }\n    & button.short::after {\n        content: "]";\n    }\n\n    & .todo {\n        color: red;\n    }\n'])));o(m("div",f({className:Wn},{children:m((function(){var n=new URLSearchParams(location.search).get("contract");return n?m(Jn,{contractAddress:n},void 0):m("div",{children:[m("h1",{children:"No contract address specified!"},void 0),m("div",{children:"Specify contract address in url like /?contract=0x0000000000000000000000000000000000000000"},void 0)]},void 0)}),{},void 0)}),void 0),document.body);export{Wn as _css};
</script>
</body></html>